<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>LGMSC Student Portal</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
    body{background:#0d1117;color:white;text-align:center;}
    header{padding:20px;}
    header img{max-height:70px;margin:10px auto;display:block;}

    /* Slideshow */
    .slideshow{position:relative;max-width:800px;margin:10px auto;overflow:hidden;border-radius:10px;}
    .slide{display:none;width:100%;height:200px;line-height:200px;background:#222;color:white;font-size:22px;position:absolute;top:0;left:0;}
    .slide.active{display:block;animation:fadeIn 1s;}
    @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}

    /* Containers */
    .container{max-width:900px;margin:20px auto;background:#161b22;padding:20px;border-radius:10px;display:none;animation:fadeIn 0.5s;}
    input,button{width:100%;padding:10px;margin:10px 0;border-radius:5px;border:none;}
    input{background:#21262d;color:white;}
    button{background:#238636;color:white;cursor:pointer;}
    button:hover{background:#2ea043;}

    /* Student cards */
    .student-card{background:#21262d;padding:10px;border-radius:10px;margin:10px;cursor:pointer;transition:0.3s;display:inline-block;width:250px;}
    .student-card:hover{transform:scale(1.05);background:#30363d;}
    .student-card img{width:100px;height:100px;border-radius:50%;margin:10px 0;}

    /* Profile Page */
    #profilePage img{width:150px;height:150px;border-radius:10px;margin:10px auto;display:block;}
    .back-btn{background:#f85149;}

  </style>
</head>
<body>
<header>
  <img id="schoolLogo" src="" alt="School Logo">
  <h1 id="schoolName">Lalbagh Govt. Model School & College</h1>
  <p>Student Directory Portal</p>
</header>

<!-- Slideshow -->
<div class="slideshow" id="slideshow">
  <div class="slide active">?? Welcome to LGMSC Portal!</div>
  <div class="slide">?? Exam starts next week, get ready!</div>
  <div class="slide">?? Annual Sports Day coming soon!</div>
</div>

<!-- Login Section -->
<div class="container" id="loginSection" style="display:block;">
  <input type="text" id="loginEmail" placeholder="Enter Email or Phone">
  <button onclick="login()">Login</button>
  <button onclick="showAdminLogin()">Admin Login</button>
</div>

<!-- Search Section -->
<div class="container" id="searchSection">
  <input type="text" id="searchBox" placeholder="Search student by name..." onkeyup="searchStudents()">
  <div id="studentList"></div>
  <button class="back-btn" onclick="goBack()">Logout</button>
</div>

<!-- Profile Page -->
<div class="container" id="profilePage"></div>

<!-- Admin Section -->
<div class="container" id="adminSection">
  <h2>Admin Panel</h2>
  <input id="studentName" placeholder="Student Name">
  <input id="studentAge" placeholder="Age" type="number">
  <input id="studentDOB" placeholder="Birth Date" type="date">
  <input id="studentGender" placeholder="Gender">
  <input id="studentClass" placeholder="Class">
  <input id="studentRoll" placeholder="Roll" type="number">
  <input id="studentSocial1" placeholder="Social Media Link 1">
  <input id="studentSocial2" placeholder="Social Media Link 2">
  <input id="studentEmail" placeholder="Email">
  <input id="studentPhone" placeholder="Phone / WhatsApp">
  <input id="studentPhoto" placeholder="Photo URL">
  <button onclick="addStudent()">Add Student</button>
  <hr>
  <h3>Update School Info</h3>
  <input id="schoolNameInput" placeholder="Enter School Name">
  <input id="schoolLogoInput" placeholder="Enter Logo URL">
  <button onclick="updateSchoolInfo()">Update</button>
  <button class="back-btn" onclick="goBack()">Back</button>
</div>

<script>
let students = JSON.parse(localStorage.getItem("students")) || [];
const adminPassword = "admin123";

/* Show specific section */
function showSection(id){
  document.querySelectorAll(".container").forEach(c=>c.style.display="none");
  document.getElementById(id).style.display="block";
}

/* Login */
function login(){ showSection("searchSection"); displayStudents(students); }

/* Admin login */
function showAdminLogin(){
  let pass = prompt("Enter Admin Password:");
  if(pass===adminPassword) showSection("adminSection");
  else alert("Wrong Password!");
}

/* Add Student */
function addStudent(){
  let student = {
    name:studentName.value, age:studentAge.value, dob:studentDOB.value,
    gender:studentGender.value, class:studentClass.value, roll:studentRoll.value,
    social1:studentSocial1.value, social2:studentSocial2.value,
    email:studentEmail.value, phone:studentPhone.value, photo:studentPhoto.value
  };
  students.push(student);
  localStorage.setItem("students", JSON.stringify(students));
  alert("Student Added!");
}

/* Display Students */
function displayStudents(list){
  let html="";
  list.forEach((s,i)=>{
    html += `<div class='student-card' onclick="viewStudent(${i})">
      <img src="${s.photo}" alt="Photo"><br>
      <strong>${s.name}</strong><br>
      Class ${s.class} • Roll ${s.roll}
    </div>`;
  });
  document.getElementById("studentList").innerHTML = html || "<p>No students found</p>";
}

/* Search */
function searchStudents(){
  let term = searchBox.value.toLowerCase();
  let filtered = students.filter(s=>s.name.toLowerCase().includes(term));
  displayStudents(filtered);
}

/* View Profile */
function viewStudent(i){
  let s = students[i];
  document.getElementById("profilePage").innerHTML = `
    <h2>${s.name}</h2>
    <img src="${s.photo}" alt="Photo">
    <p><b>Age:</b> ${s.age}</p>
    <p><b>DOB:</b> ${s.dob}</p>
    <p><b>Gender:</b> ${s.gender}</p>
    <p><b>Class:</b> ${s.class}</p>
    <p><b>Roll:</b> ${s.roll}</p>
    <p><b>Email:</b> ${s.email}</p>
    <p><b>Phone/WhatsApp:</b> ${s.phone}</p>
    <p><b>Social 1:</b> <a href="${s.social1}" target="_blank">${s.social1}</a></p>
    <p><b>Social 2:</b> <a href="${s.social2}" target="_blank">${s.social2}</a></p>
    <button class="back-btn" onclick="showSection('searchSection')">Back</button>
  `;
  showSection("profilePage");
}

/* Update School Info */
function updateSchoolInfo(){
  if(schoolNameInput.value) schoolName.innerText=schoolNameInput.value;
  if(schoolLogoInput.value) schoolLogo.src=schoolLogoInput.value;
}

/* Go back */
function goBack(){ showSection("loginSection"); }

/* Slideshow Auto Play */
let slideIndex=0;
function showSlides(){
  let slides=document.querySelectorAll(".slide");
  slides.forEach(s=>s.classList.remove("active"));
  slideIndex=(slideIndex+1)%slides.length;
  slides[slideIndex].classList.add("active");
}
setInterval(showSlides,3000);
</script>
</body>
</html>
